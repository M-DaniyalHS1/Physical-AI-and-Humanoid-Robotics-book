"use strict";(globalThis.webpackChunkai_textbook_frontend=globalThis.webpackChunkai_textbook_frontend||[]).push([[634],{192(e,s,t){t.r(s),t.d(s,{default:()=>o});t(6540);var n=t(1258),i=t(9184),a=t(4848);function r(){return(0,a.jsx)("header",{className:"hero hero--primary",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{className:"hero__title",children:"AI-Powered Physical AI & Humanoid Robotics Textbook"}),(0,a.jsx)("p",{className:"hero__subtitle",children:"Bridging the gap between digital AI and physical robots"})]})})}function o(){const e="undefined"!=typeof window&&localStorage.getItem("userId")||"demo-user";return(0,a.jsxs)(n.A,{title:"AI Textbook",description:"AI-Powered Physical AI & Humanoid Robotics Textbook",children:[(0,a.jsx)(r,{}),(0,a.jsx)("main",{children:(0,a.jsx)("section",{style:{padding:"2rem 0"},children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col col--12",children:[(0,a.jsx)("h2",{children:"AI Textbook Assistant"}),(0,a.jsx)("p",{children:"Ask questions about Physical AI & Humanoid Robotics using our AI assistant."}),(0,a.jsx)("div",{style:{marginTop:"2rem"},children:(0,a.jsx)(i.A,{userId:e})})]})})})})})]})}},9184(e,s,t){t.d(s,{A:()=>o});var n=t(6540),i=t(1256),a=t(4848);const r=({userId:e,selectedText:s=null,contentId:t=null,sessionId:i,messages:r=[],onSendMessage:o,mode:c="general",loading:l=!1,error:d=null})=>{const[h,x]=(0,n.useState)(""),[m,u]=(0,n.useState)(c),g=(0,n.useRef)(null);(0,n.useEffect)(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth"})},[r]);const p=e=>{if(!e)return"";return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return(0,a.jsx)("div",{className:"chat-widget",children:(0,a.jsxs)("div",{className:"chat-window",children:[(0,a.jsxs)("div",{className:"chat-header",children:[(0,a.jsx)("h3",{children:"AI Textbook Assistant"}),(0,a.jsx)("div",{className:"chat-controls",children:(0,a.jsxs)("div",{className:"chat-mode-selector",children:[(0,a.jsx)("label",{htmlFor:"chat-mode",children:"Mode:"}),(0,a.jsxs)("select",{id:"chat-mode",value:m,onChange:e=>{var s;(s=e.target.value)!==m&&u(s)},disabled:l||d?.includes("API is not configured"),children:[(0,a.jsx)("option",{value:"general",children:"General"}),(0,a.jsx)("option",{value:"selected-text-only",children:"Selected Text Only"})]})]})})]}),d&&d.includes("API is not configured")?(0,a.jsx)("div",{className:"api-config-error",style:{padding:"2rem",textAlign:"center",flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"Chat Service Not Available"}),(0,a.jsx)("p",{children:d}),(0,a.jsx)("p",{children:"Please contact the administrator to configure the backend API properly."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"chat-messages",children:[r.map(e=>{return(0,a.jsxs)("div",{className:"message "+(s=e.sender_type,"user"===s?"user-message":"ai"===s?"ai-message":"system-message"),style:{alignSelf:"user"===e.sender_type?"flex-end":"flex-start",backgroundColor:"user"===e.sender_type?"#e3f2fd":"ai"===e.sender_type?"#f5f5f5":"#fff8e1",padding:"8px 12px",borderRadius:"8px",marginBottom:"8px",maxWidth:"80%"},children:[(0,a.jsx)("div",{className:"message-content",children:e.content}),(0,a.jsx)("div",{className:"message-timestamp",children:p(e.timestamp)})]},e.id);var s}),l&&(0,a.jsx)("div",{className:"loading-indicator",style:{alignSelf:"flex-start",padding:"8px"},children:"AI is thinking..."}),(0,a.jsx)("div",{ref:g})]}),d&&!d.includes("API is not configured")&&(0,a.jsx)("div",{className:"chat-error",style:{color:"red",padding:"8px",fontSize:"14px"},children:d}),(0,a.jsxs)("form",{className:"chat-input-form",onSubmit:async e=>{if(e.preventDefault(),h.trim()&&!l&&i)try{await o(i,h),x("")}catch(s){console.error("Error sending message:",s)}},children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"selected-text-only"===m&&s?"Ask about the selected text...":"Ask about the textbook content...",disabled:l||!i||d?.includes("API is not configured"),style:{flex:1,padding:"10px",border:"1px solid #ccc",borderRadius:"4px",marginRight:"8px"}}),(0,a.jsx)("button",{type:"submit",disabled:l||!h.trim()||!i||d?.includes("API is not configured"),style:{padding:"10px 15px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Send"})]})]})]})})},o=({userId:e,contentId:s,selectedText:t=null})=>{const{createChatSession:o,getChatSessions:c,getChatSessionMessages:l,sendChatMessage:d,loading:h,error:x}=(0,i.V)(),[m,u]=(0,n.useState)(null),[g,p]=(0,n.useState)([]),[j,v]=(0,n.useState)([]),[f,y]=(0,n.useState)("general"),[b,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e&&!b&&A()},[e,b]);const A=async()=>{const e=process.env.REACT_APP_API_BASE_URL;if(!e||e.includes("your-"))return setError("API is not configured properly. Please check your environment settings."),void N(!0);try{const e=await c({limit:10});if(p(e),e.length>0){const s=e[0];u(s),S(s.id)}else await I();N(!0)}catch(s){console.error("Error loading chat sessions:",s)}},I=async()=>{try{const e={selectedText:"selected-text-only"===f?t:null,mode:f},s=await o(e);u(s),p(e=>[s,...e]),v([])}catch(e){console.error("Error creating chat session:",e)}},S=async e=>{try{const s=await l(e);v(s)}catch(s){console.error(`Error loading messages for session ${e}:`,s)}},w=()=>{I()};return(0,a.jsxs)("div",{className:"chat-interface",children:[(0,a.jsxs)("div",{className:"chat-interface-header",children:[(0,a.jsx)("h2",{children:"AI Textbook Assistant"}),(0,a.jsx)("div",{className:"chat-controls",children:(0,a.jsxs)("div",{className:"chat-mode-selector",children:[(0,a.jsx)("label",{htmlFor:"chat-mode",children:"Mode:"}),(0,a.jsxs)("select",{id:"chat-mode",value:f,onChange:e=>{var s;(s=e.target.value)!==f&&(y(s),m&&I())},disabled:h||x?.includes("API is not configured"),children:[(0,a.jsx)("option",{value:"general",children:"General"}),(0,a.jsx)("option",{value:"selected-text-only",children:"Selected Text Only"})]})]})})]}),(0,a.jsxs)("div",{className:"chat-interface-body",children:[(0,a.jsx)("div",{className:"session-sidebar",children:g&&0!==g.length?(0,a.jsxs)("div",{className:"session-list",children:[(0,a.jsx)("h4",{children:"Previous Sessions"}),(0,a.jsx)("ul",{children:g.map(e=>(0,a.jsxs)("li",{className:"session-item "+((m&&m.id)===e.id?"active":""),onClick:()=>(e=>{u(e),S(e.id)})(e),children:[(0,a.jsxs)("div",{className:"session-title",children:["selected-text-only"===e.mode?"\ud83d\udd0d ":"\ud83d\udcac ",new Date(e.session_start).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"session-meta",children:[e.mode," mode"]})]},e.id))}),(0,a.jsx)("button",{className:"new-session-btn",onClick:w,children:"+ New Session"})]}):(0,a.jsx)("div",{className:"no-sessions",children:"No chat sessions yet"})}),(0,a.jsx)("div",{className:"chat-main",children:x&&x.includes("API is not configured")?(0,a.jsxs)("div",{className:"api-config-error",style:{padding:"2rem",textAlign:"center"},children:[(0,a.jsx)("h3",{children:"Chat Service Not Available"}),(0,a.jsx)("p",{children:x}),(0,a.jsx)("p",{children:"Please contact the administrator to configure the backend API properly."})]}):m?(0,a.jsx)(r,{userId:e,selectedText:t,contentId:s,sessionId:m.id,messages:j,onSendMessage:async(e,s)=>{if(e&&s.trim())try{const t={id:`local-${Date.now()}`,sender_type:"user",content:s,timestamp:(new Date).toISOString()};v(e=>[...e,t]);const n=await d(e,s),i={id:`ai-${Date.now()}`,sender_type:"ai",content:n.response,timestamp:(new Date).toISOString()};v(e=>[...e,i])}catch(t){console.error("Error sending message:",t);const e={id:`error-${Date.now()}`,sender_type:"system",content:"Sorry, there was an error sending your message. Please try again.",timestamp:(new Date).toISOString()};v(s=>[...s,e])}},mode:m.mode,loading:h,error:x}):(0,a.jsxs)("div",{className:"no-session-active",children:[(0,a.jsx)("p",{children:"Select a session or create a new one to start chatting"}),(0,a.jsx)("button",{onClick:w,children:"Start New Chat"})]})})]})]})}}}]);