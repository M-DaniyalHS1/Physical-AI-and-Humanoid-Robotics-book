"use strict";(globalThis.webpackChunkai_textbook_frontend=globalThis.webpackChunkai_textbook_frontend||[]).push([[691],{6168(n,i,e){e.r(i),e.d(i,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"gazebo-unity/integration","title":"Simulation Integration with ROS 2","description":"This section covers how to integrate simulation environments with ROS 2 for Physical AI and Humanoid Robotics applications.","source":"@site/docs/gazebo-unity/integration.md","sourceDirName":"gazebo-unity","slug":"/gazebo-unity/integration","permalink":"/Physical-AI-and-Humanoid-Robotics-book/ur/docs/gazebo-unity/integration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/gazebo-unity/integration.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Simulation Integration with ROS 2"},"sidebar":"tutorialSidebar","previous":{"title":"Simulation Setup and Configuration","permalink":"/Physical-AI-and-Humanoid-Robotics-book/ur/docs/gazebo-unity/simulation"},"next":{"title":"Introduction to NVIDIA Isaac","permalink":"/Physical-AI-and-Humanoid-Robotics-book/ur/docs/nvidia-isaac/intro"}}');var t=e(4848),a=e(8453);const r={sidebar_position:3,title:"Simulation Integration with ROS 2"},s="Simulation Integration with ROS 2",l={},c=[{value:"Gazebo-ROS 2 Integration",id:"gazebo-ros-2-integration",level:2},{value:"Gazebo Plugins for ROS 2",id:"gazebo-plugins-for-ros-2",level:3},{value:"Launching Complete Simulation",id:"launching-complete-simulation",level:3},{value:"Unity-ROS 2 Integration",id:"unity-ros-2-integration",level:2},{value:"Setting up Unity for ROS 2 Communication",id:"setting-up-unity-for-ros-2-communication",level:3},{value:"Unity Robot Control Example",id:"unity-robot-control-example",level:3},{value:"Physical AI Simulation Workflows",id:"physical-ai-simulation-workflows",level:2},{value:"Training Pipeline",id:"training-pipeline",level:3},{value:"Simulation-to-Reality Transfer",id:"simulation-to-reality-transfer",level:3},{value:"Tools and Utilities",id:"tools-and-utilities",level:2},{value:"RViz2 Integration",id:"rviz2-integration",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:3},{value:"Debugging",id:"debugging",level:3}];function d(n){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"simulation-integration-with-ros-2",children:"Simulation Integration with ROS 2"})}),"\n",(0,t.jsx)(i.p,{children:"This section covers how to integrate simulation environments with ROS 2 for Physical AI and Humanoid Robotics applications."}),"\n",(0,t.jsx)(i.h2,{id:"gazebo-ros-2-integration",children:"Gazebo-ROS 2 Integration"}),"\n",(0,t.jsx)(i.p,{children:"Gazebo provides native support for ROS 2 through the Gazebo ROS packages. This allows seamless communication between the simulation and your ROS 2 nodes."}),"\n",(0,t.jsx)(i.h3,{id:"gazebo-plugins-for-ros-2",children:"Gazebo Plugins for ROS 2"}),"\n",(0,t.jsx)(i.p,{children:"Gazebo uses plugins to interface with ROS 2. Common plugins include:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"libgazebo_ros_diff_drive.so"}),": Differential drive controller"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"libgazebo_ros_joint_state_publisher.so"}),": Joint state publisher"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"libgazebo_ros_camera.so"}),": Camera sensor"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"libgazebo_ros_laser.so"}),": Laser scanner"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Example robot URDF with Gazebo plugins:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-xml",children:'<robot name="humanoid_robot">\n  \x3c!-- ... joint and link definitions ... --\x3e\n  \n  <gazebo>\n    <plugin filename="libgazebo_ros_joint_state_publisher.so" name="joint_state_publisher">\n      <ros>\n        <namespace>/humanoid_robot</namespace>\n        <remapping>~/out:=joint_states</remapping>\n      </ros>\n      <update_rate>30</update_rate>\n      <joint_name>hip_joint</joint_name>\n      <joint_name>knee_joint</joint_name>\n      \x3c!-- Add other joint names --\x3e\n    </plugin>\n  </gazebo>\n</robot>\n'})}),"\n",(0,t.jsx)(i.h3,{id:"launching-complete-simulation",children:"Launching Complete Simulation"}),"\n",(0,t.jsx)(i.p,{children:"Create a launch file to start both Gazebo and your robot controllers:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    pkg_gazebo_ros = get_package_share_directory('gazebo_ros')\n    \n    return LaunchDescription([\n        # Launch Gazebo\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(\n                os.path.join(pkg_gazebo_ros, 'launch', 'gazebo.launch.py')\n            )\n        ),\n        \n        # Spawn robot in Gazebo\n        Node(\n            package='gazebo_ros',\n            executable='spawn_entity.py',\n            arguments=['-topic', 'robot_description', '-entity', 'humanoid_robot'],\n            output='screen'\n        ),\n        \n        # Robot state publisher\n        Node(\n            package='robot_state_publisher',\n            executable='robot_state_publisher',\n            parameters=[{'use_sim_time': True}]\n        )\n    ])\n"})}),"\n",(0,t.jsx)(i.h2,{id:"unity-ros-2-integration",children:"Unity-ROS 2 Integration"}),"\n",(0,t.jsx)(i.p,{children:"Unity integration with ROS 2 requires additional setup using the Unity ROS TCP Connector."}),"\n",(0,t.jsx)(i.h3,{id:"setting-up-unity-for-ros-2-communication",children:"Setting up Unity for ROS 2 Communication"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"Create a ROS TCP Connector in Unity scene"}),"\n",(0,t.jsx)(i.li,{children:"Configure connection settings to match your ROS 2 setup"}),"\n",(0,t.jsx)(i.li,{children:"Create publishers and subscribers for robot data"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"unity-robot-control-example",children:"Unity Robot Control Example"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Sensor;\nusing RosMessageTypes.Geometry;\n\npublic class UnityHumanoidController : MonoBehaviour\n{\n    private ROSConnection ros;\n    \n    [SerializeField] private string rosIP = "127.0.0.1";\n    [SerializeField] private int rosPort = 10000;\n    \n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.Initialize(rosIP, rosPort);\n        \n        // Subscribe to ROS topics\n        ros.Subscribe<JointStateMsg>("/humanoid_robot/joint_commands", OnJointCommand);\n    }\n    \n    void OnJointCommand(JointStateMsg cmd)\n    {\n        // Apply joint commands to Unity humanoid model\n        for (int i = 0; i < cmd.name.Count; i++)\n        {\n            string jointName = cmd.name[i];\n            float position = (float)cmd.position[i];\n            // Set joint position in Unity\n            SetJointPosition(jointName, position);\n        }\n    }\n    \n    void SetJointPosition(string jointName, float position)\n    {\n        // Implementation to set Unity joint position\n    }\n    \n    void FixedUpdate()\n    {\n        // Publish robot state back to ROS\n        var jointState = new JointStateMsg();\n        // ... populate with current joint states\n        ros.Publish("/humanoid_robot/joint_states", jointState);\n    }\n}\n'})}),"\n",(0,t.jsx)(i.h2,{id:"physical-ai-simulation-workflows",children:"Physical AI Simulation Workflows"}),"\n",(0,t.jsx)(i.h3,{id:"training-pipeline",children:"Training Pipeline"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Environment Setup"}),": Create diverse simulation environments"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Scenario Definition"}),": Define tasks and reward functions"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Data Collection"}),": Run simulations and collect state-action pairs"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Model Training"}),": Train AI models using collected data"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Validation"}),": Test trained models in simulation"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Transfer"}),": Deploy to real robots with domain adaptation"]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"simulation-to-reality-transfer",children:"Simulation-to-Reality Transfer"}),"\n",(0,t.jsx)(i.p,{children:"To bridge the sim-to-real gap:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Domain Randomization"}),": Randomize simulation parameters"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"System Identification"}),": Match simulation parameters to real robot"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Adaptive Control"}),": Adjust for model discrepancies"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Progressive Transfer"}),": Gradually increase task complexity"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"tools-and-utilities",children:"Tools and Utilities"}),"\n",(0,t.jsx)(i.h3,{id:"rviz2-integration",children:"RViz2 Integration"}),"\n",(0,t.jsx)(i.p,{children:"Visualize simulation data alongside real robot data in RViz2."}),"\n",(0,t.jsx)(i.h3,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,t.jsx)(i.p,{children:"Monitor simulation performance to ensure real-time requirements."}),"\n",(0,t.jsx)(i.h3,{id:"debugging",children:"Debugging"}),"\n",(0,t.jsx)(i.p,{children:"Use ROS 2 tools to debug simulation-robot communication issues."})]})}function u(n={}){const{wrapper:i}={...(0,a.R)(),...n.components};return i?(0,t.jsx)(i,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453(n,i,e){e.d(i,{R:()=>r,x:()=>s});var o=e(6540);const t={},a=o.createContext(t);function r(n){const i=o.useContext(a);return o.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function s(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),o.createElement(a.Provider,{value:i},n.children)}}}]);